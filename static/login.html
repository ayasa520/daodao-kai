<!DOCTYPE html>
<!--此页面来源于 https://www.cnblogs.com/nyw1983/p/11406387.html-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="css/login.css">
</head>
<body>
    <div class="box">
        <h2>登录</h2>
        <form action="http://127.0.0.1:5000/api/login"  method="POST" onsubmit="return ajax_submit();">
            <div class="inputbox">
                <input type="text" id="username" name="username" required="">
                <label>用户名</label>
            </div>
            <div class="inputbox">
                <input type="password" id="password" name="password" required="">
                <label>密码</label>
            </div>
            <input type="submit" name="" value="确定">
        </form>
    </div>

</body>
<script> 
    function $(id){
        return document.getElementById(id);
    }
    function ajax_submit(){

        xmlHttp = new XMLHttpRequest();
        xmlHttp.open("post","https://daodao-kai.vercel.app/api/login");
        xmlHttp.setRequestHeader("Content-type","application/json;charset=UTF-8");
        xmlHttp.withCredentials = true;
        xmlHttp.send(JSON.stringify({
            "username": $("username").value,
            "password": $("password").value
        }));
        xmlHttp.onreadystatechange=function()
        {
            if (xmlHttp.readyState==4 && xmlHttp.status==200)
            {
                console.log(xmlHttp.responseText);
                var result = JSON.parse(xmlHttp.responseText);
                if(result["code"]===1){
                   window.location.href = "/";
                }
            }
        }

     return false;
    }
    ajax_submit();
    </script>
</html>



